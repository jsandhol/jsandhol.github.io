var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function m(){return u(" ")}function f(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}let g;function y(t){g=t}function b(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const w=[],$=[],T=[],x=[],k=Promise.resolve();let S=!1;function E(t){T.push(t)}const _=new Set;let D=0;function L(){const t=g;do{for(;D<w.length;){const t=w[D];D++,y(t),N(t.$$)}for(y(null),w.length=0,D=0;$.length;)$.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];_.has(e)||(_.add(e),e())}T.length=0}while(w.length);for(;x.length;)x.pop()();S=!1,_.clear(),y(t)}function N(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const I=new Set;function M(t,e){-1===t.$$.dirty[0]&&(w.push(t),S||(S=!0,k.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(o,a,r,c,d,u,m,f=[-1]){const p=g;y(o);const h=o.$$={fragment:null,ctx:null,props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:a.target||p.$$.root};m&&m(h.root);let v=!1;if(h.ctx=r?r(o,a.props||{},((t,e,...n)=>{const s=n.length?n[0]:e;return h.ctx&&d(h.ctx[t],h.ctx[t]=s)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](s),v&&M(o,t)),e})):[],h.update(),v=!0,s(h.before_update),h.fragment=!!c&&c(h.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);h.fragment&&h.fragment.l(t),t.forEach(l)}else h.fragment&&h.fragment.c();a.intro&&((b=o.$$.fragment)&&b.i&&(I.delete(b),b.i(w))),function(t,n,o,a){const{fragment:r,on_mount:l,on_destroy:c,after_update:d}=t.$$;r&&r.m(n,o),a||E((()=>{const n=l.map(e).filter(i);c?c.push(...n):s(n),t.$$.on_mount=[]})),d.forEach(E)}(o,a.target,a.anchor,a.customElement),L()}var b,w;y(p)}const H=function(){const t={isEmptyStr:t=>null==t||""===String(t),isNotEmptyStr:t=>null!=t&&""!==String(t),toLocaleDateTimeStr:t=>(void 0!==t?new Date(t):new Date).toLocaleString("sv",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,hour12:!1}),millisToTime:t=>{let e=parseInt(t/1e3%60),n=parseInt(t/6e4%60),s=parseInt(t/36e5%24);return s=s<10?"0"+s:s,n=n<10?"0"+n:n,e=e<10?"0"+e:e,s+":"+n+":"+e}};return t}();function z(t,e,n){const s=t.slice();return s[20]=e[n],s}function A(t,e,n){const s=t.slice();return s[23]=e[n],s[24]=e,s[25]=n,s}function O(t){let e,n,i,o,c,u,h,g,y,b,w,$,T,x,k,S,E;function _(){return t[6](t[25])}function D(){t[7].call(u,t[24],t[25])}function L(){t[8].call(y,t[24],t[25])}function N(){t[9].call($,t[24],t[25])}function I(){return t[10](t[25])}return{c(){e=d("tr"),n=d("td"),i=d("button"),i.innerHTML='<span class="icon is-small"><i class="far fa-plus-square"></i></span>',o=m(),c=d("td"),u=d("input"),h=m(),g=d("td"),y=d("input"),b=m(),w=d("td"),$=d("input"),T=m(),x=d("td"),k=d("button"),k.innerHTML='<span class="icon is-small"><i class="far fa-minus-square"></i></span>',p(i,"class","button is-small is-warning"),p(u,"class","input is-small"),p(u,"type","text"),p(y,"class","input is-small"),p(y,"type","text"),p($,"class","input is-small"),p($,"type","text"),p(k,"class","button is-small is-danger")},m(s,l){r(s,e,l),a(e,n),a(n,i),a(e,o),a(e,c),a(c,u),v(u,t[23].t),a(e,h),a(e,g),a(g,y),v(y,t[23].r),a(e,b),a(e,w),a(w,$),v($,t[23].d),a(e,T),a(e,x),a(x,k),S||(E=[f(i,"click",_),f(u,"input",D),f(y,"input",L),f($,"input",N),f(k,"click",I)],S=!0)},p(e,n){t=e,1&n&&u.value!==t[23].t&&v(u,t[23].t),1&n&&y.value!==t[23].r&&v(y,t[23].r),1&n&&$.value!==t[23].d&&v($,t[23].d)},d(t){t&&l(e),S=!1,s(E)}}}function C(t){let e,n,s,i,o,c,f,p=t[20].r+"",v=t[20].t+"";return{c(){e=d("tr"),n=d("td"),s=u(p),i=m(),o=d("td"),c=u(v),f=m()},m(t,l){r(t,e,l),a(e,n),a(n,s),a(e,i),a(e,o),a(o,c),a(e,f)},p(t,e){1&e&&p!==(p=t[20].r+"")&&h(s,p),1&e&&v!==(v=t[20].t+"")&&h(c,v)},d(t){t&&l(e)}}}function q(t){let e,n="END"!==t[20].r&&C(t);return{c(){n&&n.c(),e=u("")},m(t,s){n&&n.m(t,s),r(t,e,s)},p(t,s){"END"!==t[20].r?n?n.p(t,s):(n=C(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&l(e)}}}function j(e){let n,s,i,o,c,u,h,v,g,y;return{c(){n=d("div"),s=d("button"),i=m(),o=d("div"),o.textContent="This tool will collect your daily work time and summarize it by reference. You would typically use JIRA id (or some other incident system id) as the reference. Start by\n                        clicking the green plus button at the bottom of the table. Use 'END' as the last entry reference for the day (or click the power off button).",c=m(),u=d("div"),u.textContent="Reset will erase all information and start from scratch.",h=m(),v=d("div"),v.textContent="Save will store data to the local storage. Work Time Tracking data will be availabe next time you open this tool. It will also calculate time summary by reference.",p(s,"class","delete"),p(o,"class","block"),p(u,"class","block"),p(v,"class","block"),p(n,"class","notification is-size-7")},m(t,l){r(t,n,l),a(n,s),a(n,i),a(n,o),a(n,c),a(n,u),a(n,h),a(n,v),g||(y=f(s,"click",e[17]),g=!0)},p:t,d(t){t&&l(n),g=!1,y()}}}function J(e){let n,i,o,u,h,g,y,b,w,$,T,x,k,S,E,_,D,L,N,I,M,R,H,C,J,F,W,Y,Z,B,P,U,G,K,Q,V,X,tt,et,nt,st,it,ot=e[0].saved,at=[];for(let t=0;t<ot.length;t+=1)at[t]=O(A(e,ot,t));let rt=e[0].summary,lt=[];for(let t=0;t<rt.length;t+=1)lt[t]=q(z(e,rt,t));let ct=e[0].instructions&&j(e);return{c(){n=d("section"),i=d("h4"),i.textContent="Work Time Tracking",o=m(),u=d("div"),h=d("div"),g=d("table"),y=d("thead"),y.innerHTML='<tr><th class="col-new has-text-centered svelte-u7zxvu">+</th> \n                        <th class="col-time svelte-u7zxvu">Time</th> \n                        <th class="col-ref svelte-u7zxvu">Reference</th> \n                        <th>Description</th> \n                        <th class="col-del has-text-centered svelte-u7zxvu">-</th></tr>',b=m(),w=d("tbody");for(let t=0;t<at.length;t+=1)at[t].c();$=m(),T=d("tr"),x=d("td"),k=d("button"),k.innerHTML='<span class="icon is-small"><i class="far fa-plus-square"></i></span>',S=m(),E=d("td"),_=d("input"),D=m(),L=d("td"),N=d("input"),I=m(),M=d("td"),R=d("input"),H=m(),C=d("td"),J=d("button"),J.innerHTML='<span class="icon is-small"><i class="fas fa-power-off"></i></span>',F=m(),W=d("div"),Y=d("table"),Z=d("thead"),Z.innerHTML="<tr><th>Reference</th> \n                        <th>Total Time</th></tr>",B=m(),P=d("tbody");for(let t=0;t<lt.length;t+=1)lt[t].c();U=m(),G=d("tfoot"),K=d("tr"),Q=d("td"),V=d("button"),V.innerHTML='<span class="icon is-small"><i class="fas fa-recycle"></i></span> \n                                <span>Reset</span>',X=m(),tt=d("td"),et=d("button"),et.innerHTML='<span class="icon is-small"><i class="far fa-save"></i></span> \n                                <span>Save</span>',nt=m(),ct&&ct.c(),p(i,"class","title is-4"),p(k,"class","button is-small is-primary"),p(_,"class","input is-small"),p(_,"type","text"),p(N,"class","input is-small"),p(N,"type","text"),p(R,"class","input is-small"),p(R,"type","text"),p(J,"class","button is-small is-primary"),p(g,"class","table is-bordered is-narrow is-fullwidth"),p(h,"class","column is-9"),p(V,"class","button is-small is-fullwidth is-danger"),p(et,"class","button is-small is-fullwidth is-primary"),p(Y,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth"),p(W,"class","column is-3"),p(u,"class","columns"),p(n,"class","section")},m(t,s){r(t,n,s),a(n,i),a(n,o),a(n,u),a(u,h),a(h,g),a(g,y),a(g,b),a(g,w);for(let t=0;t<at.length;t+=1)at[t].m(w,null);a(w,$),a(w,T),a(T,x),a(x,k),a(T,S),a(T,E),a(E,_),v(_,e[0].added.t),a(T,D),a(T,L),a(L,N),v(N,e[0].added.r),a(T,I),a(T,M),a(M,R),v(R,e[0].added.d),a(T,H),a(T,C),a(C,J),a(u,F),a(u,W),a(W,Y),a(Y,Z),a(Y,B),a(Y,P);for(let t=0;t<lt.length;t+=1)lt[t].m(P,null);a(Y,U),a(Y,G),a(G,K),a(K,Q),a(Q,V),a(K,X),a(K,tt),a(tt,et),a(W,nt),ct&&ct.m(W,null),st||(it=[f(k,"click",e[11]),f(_,"input",e[12]),f(N,"input",e[13]),f(R,"input",e[14]),f(J,"click",e[2]),f(V,"click",e[15]),f(et,"click",e[16])],st=!0)},p(t,[e]){if(35&e){let n;for(ot=t[0].saved,n=0;n<ot.length;n+=1){const s=A(t,ot,n);at[n]?at[n].p(s,e):(at[n]=O(s),at[n].c(),at[n].m(w,$))}for(;n<at.length;n+=1)at[n].d(1);at.length=ot.length}if(1&e&&_.value!==t[0].added.t&&v(_,t[0].added.t),1&e&&N.value!==t[0].added.r&&v(N,t[0].added.r),1&e&&R.value!==t[0].added.d&&v(R,t[0].added.d),1&e){let n;for(rt=t[0].summary,n=0;n<rt.length;n+=1){const s=z(t,rt,n);lt[n]?lt[n].p(s,e):(lt[n]=q(s),lt[n].c(),lt[n].m(P,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=rt.length}t[0].instructions?ct?ct.p(t,e):(ct=j(t),ct.c(),ct.m(W,null)):ct&&(ct.d(1),ct=null)},i:t,o:t,d(t){t&&l(n),c(at,t),c(lt,t),ct&&ct.d(),st=!1,s(it)}}}function F(t,e,n){let s={saved:[],added:{t:void 0,r:void 0,d:void 0},summary:[],instructions:!0};const i=t=>{void 0!==t?H.isNotEmptyStr(s.saved[t].t)?window.confirm("Replace existing time?")&&n(0,s.saved[t].t=H.toLocaleDateTimeStr(),s):n(0,s.saved[t].t=H.toLocaleDateTimeStr(),s):H.isNotEmptyStr(s.added.t)?window.confirm("Replace existing time?")&&n(0,s.added.t=H.toLocaleDateTimeStr(),s):n(0,s.added.t=H.toLocaleDateTimeStr(),s)},o=()=>{n(0,s.summary=[],s),s.saved.forEach(((t,e)=>{if("END"!==t.r){let n=new Date(t.t);((t,e)=>{let n=!1;for(const i of s.summary)if(i.r===t.r){i.m=i.m+e,n=!0;break}n||s.summary.push({r:t.r,m:e,t:void 0})})(t,(e<s.saved.length-1?new Date(s.saved[e+1].t):new Date).getTime()-n.getTime())}}));const t={r:"DAY TOTAL",m:0,t:void 0};s.summary.forEach((e=>{e.t=H.millisToTime(e.m),t.m=t.m+e.m})),t.t=H.millisToTime(t.m),s.summary.push(t)},a=()=>{H.isNotEmptyStr(s.added.t)&&H.isNotEmptyStr(s.added.r)&&(s.saved.push({t:s.added.t,r:s.added.r,d:s.added.d}),n(0,s.added={t:void 0,r:void 0,d:void 0},s)),localStorage.setItem("work-time-data",JSON.stringify(s.saved)),o()},r=()=>{window.confirm("Remove all data and start from scratch?")&&(n(0,s={saved:[],added:{t:void 0,r:void 0,d:void 0},summary:[]}),localStorage.setItem("work-time-data",void 0))},l=t=>{window.confirm(`Remove time entry on row ${t+1}?`)&&(s.saved.splice(t,1),n(0,s.saved=[...s.saved],s))};b((()=>{n(0,s.saved=(()=>{let t=window.localStorage.getItem("work-time-data");return H.isNotEmptyStr(t)?JSON.parse(t):[]})(),s),o()}));return[s,i,()=>{H.isEmptyStr(s.added.t)&&n(0,s.added.t=H.toLocaleDateTimeStr(),s),H.isEmptyStr(s.added.r)&&n(0,s.added.r="END",s)},a,r,l,t=>i(t),function(t,e){t[e].t=this.value,n(0,s)},function(t,e){t[e].r=this.value,n(0,s)},function(t,e){t[e].d=this.value,n(0,s)},t=>l(t),()=>i(),function(){s.added.t=this.value,n(0,s)},function(){s.added.r=this.value,n(0,s)},function(){s.added.d=this.value,n(0,s)},()=>r(),()=>a(),()=>n(0,s.instructions=!1,s)]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),R(this,t,F,J,o,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
